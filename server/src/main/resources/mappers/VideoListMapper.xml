<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.SOOKTUBE.dao.VideoListDAO">



			<insert id="newList"
		            parameterType="com.SOOKTUBE.model.VideoListDTO">
		        INSERT INTO videoList(`listID`, `videoID`, `username`)
		        VALUES (#{listID}, #{videoID}, #{username})
		    </insert>
		    
		    <insert id="newListInfo"
		            parameterType="com.SOOKTUBE.model.VideoListDTO">
		        INSERT INTO listInfo(`listID`, `listName`, `listDesc`, `isPublic`, `thumbnail`)
		        VALUES (#{listID}, #{listName}, #{listDesc}, #{isPublic})
		    </insert>
	
		    
		    <select id="getVideoList"
		    resultType="com.SOOKTUBE.model.VideoListDTO">
    		
			SELECT videoList.`listID`, `videoID`, `listName`, `listDesc`, videoList.`username`, `isPublic`, `thumbnail`
			FROM videoList, listInfo, user
			WHERE videoList.`listID` = listInfo.`listID`
				AND
					videoList.`username` = user.`username`
    		
    		</select>
    		
    		<select id="getVideoListbyID"
    		parameterType="Integer"
		    resultType="com.SOOKTUBE.model.VideoListDTO">
    		
			SELECT videoList.`listID`, `videoID`, `listName`, `listDesc`, `username`, `isPublic`, `thumbnail`
			FROM videoList, listInfo
			WHERE videoList.`listID` = listInfo.`listID`

    		
    		</select>
    		
    		<select id="getFileNamebylistID"
    		parameterType="Integer"
		    resultType="String">
    		
			SELECT `uploadFileName`
			FROM videoList, VIDEO
			WHERE `listID` = #{listID}
				AND
					videoList.`videoID` = VIDEO.`videoID`
    		
    		</select>


    		<select id="getFileNamebylistName"
    		parameterType="String"
		    resultType="String">
    		
			SELECT `uploadFileName`
			FROM videoList, VIDEO, listInfo
			WHERE `listName` = #{listName}
				AND
					videoList.`listID` = listInfo.`listID`
				AND
					videoList.`videoID` = VIDEO.`videoID`
    		
    		</select>
    		
    		    		
    	<select id="searchListbyTitle"
    			parameterType="String"
    			resultType="com.SOOKTUBE.model.VideoListDTO">
    			
    			SELECT videoList.`listID`, `videoID`, `listName`, `listDesc`, videoList.`username`, `isPublic`
    			FROM videoList, listInfo
    			WHERE `listName` LIKE CONCAT('%',#{listName},'%')

    			
    			</select>    		
    		
    		
<!--     		<insert id="newVideo"
            parameterType="com.SOOKTUBE.model.VideoDTO"
            useGeneratedKeys="true"
            keyProperty="videoID">
		        INSERT INTO videoList(`videoTitle`, `videoDesc`, `videoDate`, `username`, `uploadFileName`)
		        VALUES (#{videoTitle}, #{videoDesc}, #{videoDate}, #{username}, #{uploadFileName})
		    </insert> -->
		    
		    
    	    <update id="editLike" parameterType="int">
		        UPDATE videoList
		           SET `like` = `like` + 1
		         WHERE `listID` = #{listID}
		         AND `videoID` = #{videoID}
		    </update>

    	    <update id="editDislike" parameterType="int">
		        UPDATE videoList
		           SET `dislike` = `dislike` - 1
		         WHERE `listID` = #{listID}
		         AND `videoID` = #{videoID}
		    </update>


</mapper>